syntax = "proto3";
package user_segmentation;

import "protoc-gen-openapiv2/options/annotations.proto";
import "google/api/annotations.proto";
import "common/common.proto";

service SegmentService{
    rpc CreateSegment (CreateSegmentRequest) returns (CreateSegmentResponse){}
    rpc DeletSegment (DeleteSegmentRequest) returns (DeleteSegmentResponse){}
    rpc UpdateSegment (UpdateSegmentRequest) returns (UpdateSegmentResponse){}
    rpc GetUserSegments (GetUserSegmentsRequest) returns (GetUserSegmentsResponse){}
    rpc AssignRandomSegments (AssignRandomSegmentsRequest) returns (AssignRandomSegmentsResponse){}
}

message Segment{
    string name =1;
}

message CreateSegmentRequest{
    Segment segment =1;
}

message CreateSegmentResponse{
    bool success =1;
    string erro =2;
    int32 id =3;
}

message DeleteSegmentRequest{
    Segment segment = 1;
}

message DeleteSegmentResponse{
    bool success =1;
    string message =2;
}

message UpdateSegmentRequest{
    Segment old_segment = 1;
    Segment new_segment = 2;

}

message UpdateSegmentResponse{
    bool success =1;
    string message =2;
}

message GetUserSegmentsRequest{
    string id = 1;
}

message GetUserSegmentsResponse{
    bool success =1;
    string message =2;
}

message AssignRandomSegmentsRequest{
    Segment segment = 1;
    float percentage = 2;
}

message AssignRandomSegmentsResponse{
    bool success =1;
    string message =2;
}